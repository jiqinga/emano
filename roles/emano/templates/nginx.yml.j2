version: "3"
services:
  nginx:
    image: {{harbor_port}}/emano/nginx:v1
    hostname: nginx
    deploy:
      replicas: 1
      restart_policy:
        condition: on-failure
      placement:
        constraints: [node.labels.role == emano]
    volumes:
      - "/emano/default.conf:/etc/nginx/conf.d/default.conf"
    ports:
      - "80:80"
    extra_hosts:
      - "umc:{{work3}}"
      - "grafana:{{dbsrv1}}"
    networks:
      - nfvonet
networks:
  nfvonet:
